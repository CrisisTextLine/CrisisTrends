{"version":3,"sources":["sections/faq.js"],"names":["window","renderFAQ","bootstrapTemplate","domNode","parentNode","removeChild","className","replace","addQuestion","question","answer","appendTo","_thisQuestion","_question","cloneNode","querySelectorAll","innerHTML","appendChild","_destination","document","getElementsByClassName","_section","_subsection","sectionTitle","faq","hasOwnProperty","section","_thisSection","src","image","_thisDestination","subsectionTitle","questions","subsection","_thisSubsection","bindFAQ","select","allElements","hide","forEach","e","style","cursor","addEventListener","event","stopPropagation","sections","this","toggle"],"mappings":"AAIA,cAEA,WAIEA,OAAOC,UAAY,WAsFjB,QAASC,GAAkBC,GAEzBA,EAAQC,WAAWC,YAAYF,GAG/BA,EAAQG,UAAYH,EAAQG,UAAUC,QAAQ,WAAY,IAS5D,QAASC,GAAYC,EAAUC,EAAQC,GACrC,GAAMC,GAAgBC,EAAUC,WAAU,EAE1CF,GAAcG,iBAAiB,MAAM,GAAGC,UAAYP,EACpDG,EAAcG,iBAAiB,KAAK,GAAGC,UAAYN,EAEnDC,EAASM,YAAYL,GArGvB,GAAMM,GAAeC,SAASC,uBAAuB,mBAAmB,GAMlEC,EAAWF,SAASC,uBAAuB,wBAAwB,EACzElB,GAAkBmB,EAMlB,IAAMC,GACJH,SAASC,uBAAuB,2BAA2B,EAC7DlB,GAAkBoB,EAMlB,IAAMT,GAAYM,SACfC,uBAAuB,yBAAyB,EACnDlB,GAAkBW,EAElB,KAAK,GAAIU,KAAgBvB,QAAOwB,IAG9B,GAAKxB,OAAOwB,IAAIC,eAAeF,GAA/B,CAKA,GAAMG,GAAU1B,OAAOwB,IAAID,GAGrBI,EAAeN,EAASP,WAAU,EAGxCa,GAAaZ,iBAAiB,MAAM,GAAGC,UAAYO,EACnDI,EAAaZ,iBAAiB,OAAO,GAAGa,IAAMF,EAAQG,KAEtD,IAAMC,GAAmBH,EAAaZ,iBAAiB,gBAAgB,EAEvE,KAAK,GAAIgB,KAAmBL,GAAQM,UAClC,GAAKN,EAAQM,UAAUP,eAAeM,GAAtC,CAKA,GAAME,GAAaP,EAAQM,UAAUD,EAErC,IAA0B,gBAAfE,GAETzB,EAAYuB,EAAiBE,EAAYH,OACpC,CAEL,GAAMI,GAAkBZ,EAAYR,WAAU,EAE9CoB,GAAgBnB,iBAAiB,MAAM,GAAGC,UAAYe,CAEtD,KAAK,GAAItB,KAAYwB,GACdA,EAAWR,eAAehB,IAI/BD,EAAYC,EAAUwB,EAAWxB,GAAWyB,EAG9CJ,GAAiBb,YAAYiB,IAIjChB,EAAaD,YAAYU,KAmC7B3B,OAAOmC,QAAU,WACf,GAAMC,GAAS,eAETC,EAAclB,SAASJ,iBAAiBqB,EAC9CE,MAAKD,GAELA,EAAYE,QAAQ,SAAAC,GAClBA,EAAEC,MAAMC,OAAS,OAGjBF,EAAEG,iBAAiB,QAAS,SAASC,GACnCA,EAAMC,qBAIV,IAAMC,GAAW3B,SAASJ,iBAAiB,eAC3C+B,GAASP,QAAQ,SAAAC,GACfA,EAAEC,MAAMC,OAAS,UAEjBF,EAAEG,iBAAiB,QAAS,WAC1BI,KAAKhC,iBAAiBqB,GAAQG,QAAQS","file":"faq.js","sourcesContent":["/* global\n    hide\n    toggle\n */\n'use strict';\n\n(function() {\n  /**\n   * Render the FAQ questions from a file located at /faq.js.\n   */\n  window.renderFAQ = () => {\n    /**\n     * Destination of all FAQ items\n     * @type {Element}\n     */\n    const _destination = document.getElementsByClassName('faq-placeholder')[0];\n\n    /**\n     * Template for each wrapper section, including an image.\n     * @type {Element}\n     */\n    const _section = document.getElementsByClassName('template faq-section')[0];\n    bootstrapTemplate(_section);\n\n    /**\n     * Template for each wrapper subsection, including an image.\n     * @type {Element}\n     */\n    const _subsection =\n      document.getElementsByClassName('template faq-subsection')[0];\n    bootstrapTemplate(_subsection);\n\n    /**\n     * Template for each question.\n     * @type {[type]}\n     */\n    const _question = document\n      .getElementsByClassName('template faq-question')[0];\n    bootstrapTemplate(_question);\n\n    for (let sectionTitle in window.faq) {\n      // Since we're working with a global obj, let's make sure we're not\n      // screwed by accidental prototyping.\n      if (!window.faq.hasOwnProperty(sectionTitle)) {\n        continue;\n      }\n\n      /** @type {object} Shortcut  */\n      const section = window.faq[sectionTitle];\n\n      /** @type {Element} The new section where we're putting the FAQ elements */\n      const _thisSection = _section.cloneNode(true);\n\n      // Fill in template data\n      _thisSection.querySelectorAll('h1')[0].innerHTML = sectionTitle;\n      _thisSection.querySelectorAll('img')[0].src = section.image;\n\n      const _thisDestination = _thisSection.querySelectorAll('.faq-content')[0];\n\n      for (let subsectionTitle in section.questions) {\n        if (!section.questions.hasOwnProperty(subsectionTitle)) {\n          continue;\n        }\n\n        /** @type {object,string} The set of either subsections or questions */\n        const subsection = section.questions[subsectionTitle];\n\n        if (typeof subsection === 'string') {\n          // we have a question\n          addQuestion(subsectionTitle, subsection, _thisDestination);\n        } else {\n          // we have a subsection\n          const _thisSubsection = _subsection.cloneNode(true);\n\n          _thisSubsection.querySelectorAll('h2')[0].innerHTML = subsectionTitle;\n\n          for (let question in subsection) {\n            if (!subsection.hasOwnProperty(question)) {\n              continue;\n            }\n\n            addQuestion(question, subsection[question], _thisSubsection);\n          }\n\n          _thisDestination.appendChild(_thisSubsection);\n        }\n      }\n      // Finally, append to the DOM.\n      _destination.appendChild(_thisSection);\n    }\n\n    /**\n     * Bootstrap a template by removing it from the dom and removing the template class.\n     *\n     * @param {Element} domNode The domNode to bootstrap into a template\n     */\n    function bootstrapTemplate(domNode) {\n      // Remove from DOM\n      domNode.parentNode.removeChild(domNode);\n\n      // Remove the template class\n      domNode.className = domNode.className.replace('template', '');\n    }\n\n    /**\n     * Add a question using the global question template to an Element, appendTo.\n     * @param {string} question question\n     * @param {string} answer answer\n     * @param {Element} appendTo Element to append the question to\n     */\n    function addQuestion(question, answer, appendTo) {\n      const _thisQuestion = _question.cloneNode(true);\n\n      _thisQuestion.querySelectorAll('h3')[0].innerHTML = question;\n      _thisQuestion.querySelectorAll('p')[0].innerHTML = answer;\n\n      appendTo.appendChild(_thisQuestion);\n    }\n  };\n\n  /**\n   * Bind click events and hide elements from the FAQ\n   */\n  window.bindFAQ = () => {\n    const select = '.faq-content';\n\n    const allElements = document.querySelectorAll(select);\n    hide(allElements);\n\n    allElements.forEach(e => {\n      e.style.cursor = 'auto';\n\n      // Prevent the click listener on the parent from affecting this (i.e. re-hiding this element)\n      e.addEventListener('click', function(event) {\n        event.stopPropagation();\n      });\n    });\n\n    const sections = document.querySelectorAll('.faq-section');\n    sections.forEach(e => {\n      e.style.cursor = 'pointer';\n\n      e.addEventListener('click', function() {\n        this.querySelectorAll(select).forEach(toggle);\n      });\n    });\n  };\n})();\n"]}