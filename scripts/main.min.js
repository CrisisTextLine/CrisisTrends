"use strict";!function(){var t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||t)&&navigator.serviceWorker.register("service-worker.js").then(function(t){t.onupdatefound=function(){navigator.serviceWorker.controller&&!function(){var e=t.installing;e.onstatechange=function(){switch(e.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}()}})["catch"](function(t){console.error("Error during service worker registration:",t)})}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(){function t(t,e,n){for(var r,o,a,i=([{x:0,y:0},{x:f[0],y:f[1]}],e.x),c=e.y,l=Math.sqrt(f[0]*f[0]+f[1]*f[1]),d=E(f),h=Math.random()<.5?1:-1,y=-h;(r=d(y+=h))&&(o=~~r[0],a=~~r[1],!(Math.min(o,a)>l));)if(e.x=i+o,e.y=c+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>f[0]||e.y+e.y1>f[1])&&(!n||!s(e,t,f[0]))&&(!n||u(e,n))){for(var m,p=e.sprite,v=e.width>>5,w=f[0]>>5,g=e.x-(v<<4),x=127&g,b=32-x,M=e.y1-e.y0,q=(e.y+e.y0)*w+(g>>5),L=0;L<M;L++){m=0;for(var S=0;S<=v;S++)t[q+S]|=m<<b|(S<v?(m=p[L*v+S])>>>x:0);q+=w}return delete e.sprite,!0}return!1}var f=[256,256],y=e,m=n,p=o,v=r,w=r,g=a,b=i,E=d,M=[],q=1/0,L=d3.dispatch("word","end"),S=null,A={};return A.start=function(){function e(){for(var e,u=+new Date;+new Date-u<q&&++a<o&&S;)e=s[a],e.x=f[0]*(Math.random()+.5)>>1,e.y=f[1]*(Math.random()+.5)>>1,c(e,s,a),e.hasText&&t(n,e,r)&&(i.push(e),L.word(e),r?l(r,e):r=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}],e.x-=f[0]>>1,e.y-=f[1]>>1);a>=o&&(A.stop(),L.end(i,r))}var n=h((f[0]>>5)*f[1]),r=null,o=M.length,a=-1,i=[],s=M.map(function(t,e){return t.text=y.call(this,t,e),t.font=m.call(this,t,e),t.style=v.call(this,t,e),t.weight=w.call(this,t,e),t.rotate=g.call(this,t,e),t.size=~~p.call(this,t,e),t.padding=b.call(this,t,e),t}).sort(function(t,e){return e.size-t.size});return S&&clearInterval(S),S=setInterval(e,0),e(),A},A.stop=function(){return S&&(clearInterval(S),S=null),A},A.timeInterval=function(t){return arguments.length?(q=null==t?1/0:t,A):q},A.words=function(t){return arguments.length?(M=t,A):M},A.size=function(t){return arguments.length?(f=[+t[0],+t[1]],A):f},A.font=function(t){return arguments.length?(m=d3.functor(t),A):m},A.fontStyle=function(t){return arguments.length?(v=d3.functor(t),A):v},A.fontWeight=function(t){return arguments.length?(w=d3.functor(t),A):w},A.rotate=function(t){return arguments.length?(g=d3.functor(t),A):g},A.text=function(t){return arguments.length?(y=d3.functor(t),A):y},A.spiral=function(t){return arguments.length?(E=x[t+""]||t,A):E},A.fontSize=function(t){return arguments.length?(p=d3.functor(t),A):p},A.padding=function(t){return arguments.length?(b=d3.functor(t),A):b},d3.rebind(A,L,"on")}function e(t){return t.text}function n(){return"serif"}function r(){return"normal"}function o(t){return Math.sqrt(t.value)}function a(){return 30*(~~(6*Math.random())-3)}function i(){return 1}function c(t,e,n){if(!t.sprite){g.clearRect(0,0,(p<<5)/w,v/w);var r=0,o=0,a=0,i=e.length;for(--n;++n<i;){t=e[n],g.save(),g.font=t.style+" "+t.weight+" "+~~((t.size+1)/w)+"px "+t.font;var c=g.measureText(t.text+"m").width*w,s=t.size<<1;if(t.rotate){var l=Math.sin(t.rotate*m),u=Math.cos(t.rotate*m),d=c*u,f=c*l,h=s*u,y=s*l;c=Math.max(Math.abs(d+y),Math.abs(d-y))+31>>5<<5,s=~~Math.max(Math.abs(f+h),Math.abs(f-h))}else c=c+31>>5<<5;if(s>a&&(a=s),r+c>=p<<5&&(r=0,o+=a,a=0),o+s>=v)break;g.translate((r+(c>>1))/w,(o+(s>>1))/w),t.rotate&&g.rotate(t.rotate*m),g.fillText(t.text,0,0),t.padding&&(g.lineWidth=2*t.padding,g.strokeText(t.text,0,0)),g.restore(),t.width=c,t.height=s,t.xoff=r,t.yoff=o,t.x1=c>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,r+=c}for(var x=g.getImageData(0,0,(p<<5)/w,v/w).data,b=[];--n>=0;)if(t=e[n],t.hasText){for(var c=t.width,E=c>>5,s=t.y1-t.y0,M=0;M<s*E;M++)b[M]=0;if(r=t.xoff,null==r)return;o=t.yoff;for(var q=0,L=-1,S=0;S<s;S++){for(var M=0;M<c;M++){var A=E*S+(M>>5),T=x[(o+S)*(p<<5)+(r+M)<<2]?1<<31-M%32:0;b[A]|=T,q|=T}q?L=S:(t.y0++,s--,S--,o++)}t.y1=t.y0+L,t.sprite=b.slice(0,(t.y1-t.y0)*E)}}}function s(t,e,n){n>>=5;for(var r,o=t.sprite,a=t.width>>5,i=t.x-(a<<4),c=127&i,s=32-c,l=t.y1-t.y0,u=(t.y+t.y0)*n+(i>>5),d=0;d<l;d++){r=0;for(var f=0;f<=a;f++)if((r<<s|(f<a?(r=o[d*a+f])>>>c:0))&e[u+f])return!0;u+=n}return!1}function l(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function u(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function d(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function f(t){var e=4,n=e*t[0]/t[1],r=0,o=0;return function(t){var a=t<0?-1:1;switch(Math.sqrt(1+4*a*t)-a&3){case 0:r+=n;break;case 1:o+=e;break;case 2:r-=n;break;default:o-=e}return[r,o]}}function h(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}var y,m=Math.PI/180,p=64,v=2048,w=1;"undefined"!=typeof document?(y=document.createElement("canvas"),y.width=1,y.height=1,w=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2),y.width=(p<<5)/w,y.height=v/w):y=new Canvas(p<<5,v);var g=y.getContext("2d"),x={archimedean:d,rectangular:f};g.fillStyle=g.strokeStyle="red",g.textAlign="center","object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t:(d3.layout||(d3.layout={})).cloud=t}(),window.toggle=function(t){return t instanceof NodeList?(t.forEach(toggle),t):"inherit"===t.style.display?hide(t):show(t)},window.hide=function(t){return t instanceof NodeList?t.forEach(hide):t.style.display="none",t},window.show=function(t){return t instanceof NodeList?t.forEach(hide):t.style.display="inherit",t},function(){window.renderFAQ=function(){function t(t){t.parentNode.removeChild(t),t.className=t.className.replace("template","")}function e(t,e,n){var r=a.cloneNode(!0);r.querySelectorAll("h3")[0].innerHTML=t,r.querySelectorAll("p")[0].innerHTML=e,n.appendChild(r)}var n=document.getElementsByClassName("faq-placeholder")[0],r=document.getElementsByClassName("template faq-section")[0];t(r);var o=document.getElementsByClassName("template faq-subsection")[0];t(o);var a=document.getElementsByClassName("template faq-question")[0];t(a);for(var i in window.faq)if(window.faq.hasOwnProperty(i)){var c=window.faq[i],s=r.cloneNode(!0);s.querySelectorAll("h1")[0].innerHTML=i,s.querySelectorAll("img")[0].src=c.image;var l=s.querySelectorAll(".faq-content")[0];for(var u in c.questions)if(c.questions.hasOwnProperty(u)){var d=c.questions[u];if("string"==typeof d)e(u,d,l);else{var f=o.cloneNode(!0);f.querySelectorAll("h2")[0].innerHTML=u;for(var h in d)d.hasOwnProperty(h)&&e(h,d[h],f);l.appendChild(f)}}n.appendChild(s)}},window.bindFAQ=function(){var t=".faq-content",e=document.querySelectorAll(t);hide(e),e.forEach(function(t){t.style.cursor="auto",t.addEventListener("click",function(t){t.stopPropagation()})});var n=document.querySelectorAll(".faq-section");n.forEach(function(e){e.style.cursor="pointer",e.addEventListener("click",function(){this.querySelectorAll(t).forEach(toggle)})})}}(),function(){function t(){e("27212575")}function e(t){t=parseInt(t,10);var r=t-a;a+=Math.ceil(r/2),n(),a!==t&&setTimeout(function(){e(t)},125-5*Math.log(r))}function n(){o.innerHTML=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var r="http://www.crisistextline.org/trends/data/messages.txt",o=document.getElementById("message-count"),a=parseInt(o.innerHTML.replace(/,/g,""),10);window.getMessageCount=function(){var n=new XMLHttpRequest;n.addEventListener("load",function(){200===n.status?e(n.responseText):t()}),n.addEventListener("error",function(){t()}),n.open("GET",r),n.send()}}(),function(){function t(t){o&&t!==!0||(document.getElementById("viz").src=r,o=!0)}function e(){t(!0),n()}function n(){var t=document.getElementById("viz");t.offsetWidth<=500?t.height=1950:t.height=2600}var r="http://public.tableausoftware.com/views/crisistrends2dec132016/WorkingDashMobile?:embed=y&:showVizHome=no&:host_url=https%3A%2F%2Fpublic.tableausoftware.com%2F&:tabs=no&:toolbar=top&:animate_transition=yes&:display_static_image=no&:display_spinner=yes&:display_overlay=yes&:display_count=yes&:loadOrderID=0",o=!1;window.addEventListener("scroll",t),window.addEventListener("resize-complete",e),n()}(),function(){function t(){var t=new XMLHttpRequest;t.addEventListener("load",function(){200===t.status&&(l=JSON.parse(t.responseText))}),t.open("GET","data/quotes.json"),t.send()}function e(){s.attr("height",d),n(),a.style.display="none"}function n(t){u=a.offsetWidth,s.attr("width",u),t!==!0&&r()}function r(t){if(void 0===t){if(void 0===h)return;t=h}else h=t;s.selectAll("g").remove(),f=s.append("g").attr("transform","translate("+[u>>1,d>>1]+")");var e=0,n=1e6;for(var r in t)t[r].c>e&&(e=t[r].c),t[r].c<n&&(n=t[r].c);var a=d3.scale.linear().range([50,120]).domain([10,960])(u),i=d3.scale.linear().range([12,a]).domain([n,e]);d3.layout.cloud().size([u,d]).words(t).rotate(function(){return 0}).font("Impact").fontSize(function(t){return i(t.c)}).text(function(t){return t.w}).on("end",o).start()}function o(t,e){var n=e?Math.min(u/Math.abs(e[1].x-u/2),u/Math.abs(e[0].x-u/2),d/Math.abs(e[1].y-d/2),d/Math.abs(e[0].y-d/2))/2:1;f.selectAll("text").data(t).enter().append("text").attr("text-anchor","middle").style("font-size",function(t){return t.size+"px"}).style("font-family","Impact").style("fill",function(){return"rgba(0,0,0,"+(.5*Math.random()+.25)+")"}).attr("text-anchor","middle").attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).text(function(t){return t.w}),f.attr("transform","translate("+[u>>1,d>>1]+")scale("+n+")")}var a=document.getElementById("wordcloud"),i=document.getElementById("wordcloud-quote"),c=500,s=d3.select(a).append("svg"),l=void 0,u=void 0,d=c,f=void 0,h=void 0;window.bootstrapWordCloud=function(){t(),e(),window.addEventListener("resize-complete",n)},document.getElementById("wordcloud-select").addEventListener("change",function(){var t=this.value;a.style.display="block",n(!0),d3.json("data/words/"+t+".json",function(e,n){return e?console.warn(e):(void 0!==l&&(i.innerHTML="<p>"+l[t]+"</p>"),void r(n))})})}(),function(){function t(){document.querySelectorAll(".hamburger")[0].addEventListener("click",function(){toggle(document.querySelectorAll(".hamburger-menu"))}),document.querySelectorAll(".hamburger-menu a").forEach(function(t){t.addEventListener("click",function(){hide(document.querySelectorAll(".hamburger-menu"))})})}function e(){void 0===NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)}function n(){document.querySelectorAll('a[href="#top"]').forEach(function(t){t.addEventListener("click",function(t){window.scrollTo(0,0),t.preventDefault()})})}e(),t(),getMessageCount(),renderFAQ(),bindFAQ(),bootstrapWordCloud(),n();var r=void 0,o=window.outerWidth;window.addEventListener("resize",function(t){clearTimeout(r),r=setTimeout(function(){if(window.outerWidth!==o){o=window.outerWidth;var e=new Event("resize-complete");e.originalEvent=t,window.dispatchEvent(e)}},500)})}();
//# sourceMappingURL=main.min.js.map
