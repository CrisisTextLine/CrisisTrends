"use strict";/*!
               *
               *  Web Starter Kit
               *  Copyright 2015 Google Inc. All rights reserved.
               *
               *  Licensed under the Apache License, Version 2.0 (the "License");
               *  you may not use this file except in compliance with the License.
               *  You may obtain a copy of the License at
               *
               *    https://www.apache.org/licenses/LICENSE-2.0
               *
               *  Unless required by applicable law or agreed to in writing, software
               *  distributed under the License is distributed on an "AS IS" BASIS,
               *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
               *  See the License for the specific language governing permissions and
               *  limitations under the License
               *
               */
!function(){var e=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||e)&&navigator.serviceWorker.register("service-worker.js").then(function(e){e.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(e){console.error("Error during service worker registration:",e)})}(),function(){window.renderFAQ=function(){function e(e){e.parentNode.removeChild(e),e.className=e.className.replace("template","")}function t(e,t,n){var o=a.cloneNode(!0);o.querySelectorAll("h3")[0].innerHTML=e,o.querySelectorAll("p")[0].innerHTML=t,n.appendChild(o)}var n=document.getElementsByClassName("faq-placeholder")[0],o=document.getElementsByClassName("template faq-section")[0];e(o);var r=document.getElementsByClassName("template faq-subsection")[0];e(r);var a=document.getElementsByClassName("template faq-question")[0];e(a);for(var i in window.faq)if(window.faq.hasOwnProperty(i)){var s=window.faq[i],c=o.cloneNode(!0);c.querySelectorAll("h1")[0].innerHTML=i,c.querySelectorAll("img")[0].src=s.image;var l=c.querySelectorAll(".faq-content")[0];for(var d in s.questions)if(s.questions.hasOwnProperty(d)){var u=s.questions[d];if("string"==typeof u)t(d,u,l);else{var f=r.cloneNode(!0);f.querySelectorAll("h2")[0].innerHTML=d;for(var p in u)u.hasOwnProperty(p)&&t(p,u[p],f);l.appendChild(f)}}n.appendChild(c)}},window.bindFAQ=function(){function e(e){return"none"===e.style.display?n(e):t(e)}function t(e){return e instanceof NodeList?e.forEach(t):e.style.display="none",e}function n(e){return e.style.display="inherit",e}var o=".faq-content",r=document.querySelectorAll(o);t(r),r.forEach(function(e){e.style.cursor="auto",e.addEventListener("click",function(e){e.stopPropagation()})});var a=document.querySelectorAll(".faq-section");a.forEach(function(t){t.style.cursor="pointer",t.addEventListener("click",function(){this.querySelectorAll(o).forEach(e)})})}}(),function(){function e(){t("27212575")}function t(e){e=parseInt(e,10);var o=e-a;a+=Math.ceil(o/2),n(),a!==e&&setTimeout(function(){t(e)},125-5*Math.log(o))}function n(){r.innerHTML=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var o="http://www.crisistextline.org/trends/data/messages.txt",r=document.getElementById("message-count"),a=parseInt(r.innerHTML.replace(/,/g,""),10);window.getMessageCount=function(){var n=new XMLHttpRequest;n.addEventListener("load",function(){200===n.status?t(n.responseText):e()}),n.addEventListener("error",function(){e()}),n.open("GET",o),n.send()}}(),function(){function e(){var e=new XMLHttpRequest;e.addEventListener("load",function(){200===e.status&&(a=JSON.parse(e.responseText))}),e.open("GET","data/quotes.json"),e.send()}function t(){i=d3.select(d).append("svg"),i.attr("height",p),n(),d.style.display="none"}function n(){s=d.offsetWidth,i.attr("width",s),o()}function o(e){if(void 0===e){if(void 0===l)return;e=l}else l=e;i.selectAll("g").remove(),c=i.append("g").attr("transform","translate("+[s>>1,p>>1]+")");var t=0,n=1e6;for(var o in e)e[o].c>t&&(t=e[o].c),e[o].c<n&&(n=e[o].c);var a=d3.scale.linear().range([50,120]).domain([10,960])(s),d=d3.scale.linear().range([12,a]).domain([n,t]);d3.layout.cloud().size([s,p]).words(e).rotate(function(){return 0}).font("Impact").fontSize(function(e){return d(e.c)}).text(function(e){return e.w}).on("end",r).start()}function r(e,t){var n=t?Math.min(s/Math.abs(t[1].x-s/2),s/Math.abs(t[0].x-s/2),p/Math.abs(t[1].y-p/2),p/Math.abs(t[0].y-p/2))/2:1;c.selectAll("text").data(e).enter().append("text").attr("text-anchor","middle").style("font-size",function(e){return e.size+"px"}).style("font-family","Impact").style("fill",function(){return"rgba(0,0,0,"+(.5*Math.random()+.25)+")"}).attr("text-anchor","middle").attr("transform",function(e){return"translate("+[e.x,e.y]+")rotate("+e.rotate+")"}).text(function(e){return e.w}),c.attr("transform","translate("+[s>>1,p>>1]+")scale("+n+")")}var a,i,s,c,l,d=document.getElementById("wordcloud"),u=document.getElementById("wordcloud-quote"),f=500,p=f;window.bootstrapWordCloud=function(){e(),t(),window.addEventListener("resize-complete",n)},document.getElementById("wordcloud-select").addEventListener("change",function(){var e=this.value;d.style.display="block",d3.json("data/words/"+e+".json",function(t,n){return t?console.warn(t):(void 0!==a&&(u.innerHTML="<p>"+a[e]+"</p>"),void o(n))})})}(),function(){getMessageCount(),renderFAQ(),bindFAQ(),bootstrapWordCloud();var e=void 0;window.addEventListener("resize",function(t){clearTimeout(e),e=setTimeout(function(){var e=new Event("resize-complete");e.originalEvent=t,window.dispatchEvent(e)},500)})}();
//# sourceMappingURL=main.min.js.map
